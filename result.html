<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Full Width Pics - Start Bootstrap Template</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/favicon.ico" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap');

        .main {
            height: 100vh;
            width: 100vw;
            display: flex;
            font-family: 'Gowun Dodum';
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
    <script src="assets/test.json" type="text/javascript"></script>
    <script src="assets/html2canvas.min.js"></script>
</head>

<body style="overflow: hidden;">
    <div id="capture_area" class="main" style="background-image: url('assets/BG04.png');">
        <div>
            <h1 id="resultVerse" style="font-size: 14px; text-align: center;">2023년 말씀 배경 결과</h1>
            <h1 id="resultVerseId" style="font-size: 14px; text-align: center;">2023년 말씀 배경 결과</h1>
        </div>
    </div>
    <div style="position: absolute; right: 5px; bottom: 50px;">
        <button onclick="downloadImage()" class="button_base">이미지 저장</button>
    </div>
    <div style="position: absolute; right: 5px; bottom: 5px;">
        <button onclick="location.href='index.html'" class="button_base">다시 뽑기</button>
    </div>
    <script>
        let testData = JSON.parse(JSON.stringify(TestFile));
        console.log(testData);


        // 화면 로딩시 랜덤 이미지 
        window.onload = function () {
            randomBible();
            getRandomVerse();
        }

        // 말씀 생성 버튼
        function getRandomVerse() {
            document.getElementById('resultVerse').innerText = testData.bibles[getRandomInt(testData.bibles.length)].verse;
            document.getElementById('resultVerseId').innerText = testData.bibles[getRandomInt(testData.bibles.length)].verseid;
        }

        function downloadImage() {
            document.getElementById("capture_area").style.backgroundImage = `url('assets/BG0${getRandomInt(5)}.png')`;
            document.getElementById("capture_area").style.backgroundRepeat = "no-repeat";
            document.getElementById("capture_area").style.backgroundSize = "cover";
            html2canvas(document.getElementById("capture_area")).then(function (canvas) {
                var el = document.createElement("a")
                el.href = canvas.toDataURL("image/jpeg")
                el.download = '이미지.jpg' //다운로드 할 파일명 설정
                el.click()
            })
        }

        // 랜덤 버튼 생성 함수
        function getRandomInt(max) {
            return Math.floor(Math.random() * max);
        }

        // 말씀 뽑기 클릭시 작동
        function randomBible() {
            document.getElementById("capture_area").style.backgroundImage = `url('assets/BG0${getRandomInt(5)}.png')`;
            document.getElementById("capture_area").style.backgroundRepeat = "no-repeat";
            document.getElementById("capture_area").style.backgroundSize = "cover";
        }
    </script>
    <link rel="stylesheet" href="button.css">
</body>

</html>